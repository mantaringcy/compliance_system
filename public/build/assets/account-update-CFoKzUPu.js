import{t as s,s as d}from"./app-DuqV-uRB.js";let p={username:$("#username").val(),email:$("#email").val(),departmentId:$('select[name="department_id"]').val(),roleId:$('select[name="role_id"]').val()};$("#updateProfileForm").on("submit",function(o){o.preventDefault();const t={username:$("#username").val(),email:$("#email").val(),departmentId:$("#departmentSelect").val(),roleId:$('select[name="role_id"]').val()};if(!Object.keys(t).some(a=>t[a]!==p[a])){alert("No changes detected. Please make changes to update your profile.");return}s("#updateProfileBtn",!0,"#buttonProfileText","Updating Profile"),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(a){d("#alertProfileUpdate",a);let e=t.username,i=t.roleId,n=t.departmentId,r=e.charAt(0).toUpperCase()+e.slice(1);$("#sidebar-username").text(r),$("#sidebar-role").text(roleMapping[i-1].role_name),$("#sidebar-department").text(departmentMapping[n-1].department_name+" Department"),s("#updateProfileBtn",!1,"#buttonProfileText","Update Profile"),p=t},error:function(a){}})});$("#updatePasswordForm").on("submit",function(o){o.preventDefault();let t=$("#old_password").val(),l=$("#new_password").val(),a=$("#password_confirmation").val();if(!t||!l||!a){alert("Please fill out all password fields.");return}l===a&&s("#updatePasswordBtn",!0,"#buttonPasswordText","Updating Password"),$.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){s("#updatePasswordBtn",!1,"#buttonPasswordText","Update Password"),e.success?(d("#alertPasswordUpdateSuccess",e),$("#updatePasswordForm").trigger("reset")):d("#alertPasswordUpdateError",e)},error:function(e,i,n){if(e.status===422){let r=e.responseJSON.errors;r.new_password&&alert(r.new_password[0]),r.old_password&&alert(r.old_password[0])}console.error("Password update error:",n),$("#alert").text("An error occurred while updating the password.").show()}})});
