import{a as i}from"./app-DuqV-uRB.js";let l={};$(document).on("click",".edit-compliance",function(){$(this).attr("data-compliance-id");const n=$(this).attr("data-compliance-name"),e=$(this).attr("data-department-id"),t=$(this).attr("data-compliance-reference-date"),c=$(this).attr("data-compliance-frequency"),a=$(this).attr("data-compliance-start-working-on"),o=$(this).attr("data-compliance-submit-on");l={complianceName:n,departmentId:e,referenceDate:t,frequency:c,startWorkingOn:a,submitOn:o},$("#editComplianceModal #complianceName").val(n),$("#editComplianceModal #departmentSelect").val(e),$("#editComplianceModal #referenceDate").val(t),$("#editComplianceModal #frequency").val(c),$("#editComplianceModal #startWorkingOn").val(a),$("#editComplianceModal #submitOn").val(o)});$("#newComplianceForm").on("submit",function(n){n.preventDefault(),$("#newComplianceForm").attr("action","/compliances/"),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#newComplianceModal").modal("hide"),$("#complianceListTable").DataTable().ajax.reload(null,!1),$("#newComplianceForm")[0].reset(),i("#alert-compliance-created",null,e.compliance_name,e)},error:function(e){$(".invalid-feedback").text(""),e.responseJSON.errors&&$.each(e.responseJSON.errors,function(t,c){$("."+t).text(c[0])})}})});$("#editComplianceForm").on("submit",function(n){n.preventDefault();const e=$("#complianceId").val();$("#complianceName").val(),$("#departmentSelect").val(),$("#referenceDate").val(),$("#frequency").val(),$("#startWorkingOn").val(),$("#submitOn").val();const t={complianceName:$("#editComplianceModal #complianceName").val(),departmentId:$("#editComplianceModal #departmentSelect").val(),referenceDate:$("#editComplianceModal #referenceDate").val(),frequency:$("#editComplianceModal #frequency").val(),startWorkingOn:$("#editComplianceModal #startWorkingOn").val(),submitOn:$("#editComplianceModal #submitOn").val()};if(!Object.keys(t).some(a=>t[a]!==l[a])){alert("No changes detected. Please modify the compliance data before submitting.");return}$("#editComplianceForm").attr("action","/compliances/"+e),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(a){$("#editComplianceModal").modal("hide"),$("#complianceListTable").DataTable().ajax.reload(null,!1),i("#alert-compliance-edited",e,null,a)},error:function(a){$(".invalid-feedback").text(""),a.responseJSON.errors&&$.each(a.responseJSON.errors,function(o,r){$("."+o).text(r[0])})}})});$("#deleteComplianceForm").on("submit",function(n){n.preventDefault();const e=$("#complianceId").val();$("#deleteComplianceForm").attr("action","/compliances/"+e),$.ajax({url:$(this).attr("action"),type:"POST",data:$(this).serialize(),headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){$("#deleteComplianceModal").modal("hide"),$("#complianceListTable").DataTable().ajax.reload(null,!1),i("#alert-compliance-deleted",e,null,t)}})});
